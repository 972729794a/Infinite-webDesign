webpackJsonp([8],{"42Hy":function(t,e,a){"use strict";function s(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var i=a("Ug5s"),o=a("NYxO"),n=a("GQaK"),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},r={data:function(){return{pagenum:0,pagesize:8,dataList:[],scrollTopView:!1,pullDownText:"下拉刷新",slidename:"slide-back",mainarea:!1,loadingTitle:"正在加载下一页"}},components:{Footers:i.a},computed:l({},Object(o.b)(["this.$store.state.carts","this.$store.state.comname"])),watch:{},activated:function(){this.mainarea=!0},deactivated:function(){this.mainarea=!1},mounted:function(){var t=this;this.getData(),this.$nextTick(function(){t.scroll=new n.a(t.$refs.wrapper,{click:!0,pullUpLoad:{threshold:0},pullDownRefresh:{threshold:80,stop:20},mouseWheel:{speed:20,invert:!1,easeTime:30}}),t.scroll.on("pullingUp",function(){t.$toastBox.showToastBox({toast:t.loadingTitle}),t.getData(),t.scroll.finishPullUp()}),t.scroll.on("pullingDown",function(e){t.pagenum=0,t.dataList=[],t.getData(),t.scroll.finishPullDown()}),t.scroll.on("scroll",function(e){t.scrollY=e.y,e.y>80?t.pullDownText="释放刷新":t.pullDownText="下拉刷新",e.y<-120?t.scrollTopView=!0:t.scrollTopView=!1})})},methods:l({toDetail:function(t){this.$router.push({path:"/detail",query:{id:t,from:"index"}})},getData:function(){var t=this;this.pagenum=this.pagenum+1,this.$http.post("api/recommend/all",{pagenum:this.pagenum,pagesize:this.pagesize}).then(function(e){0==e.data.data.length&&(t.loadingTitle="没有更多的数据了"),t.dataList=[].concat(s(t.dataList),s(e.data.data))}).catch(function(t){console.log(t)})},toTop:function(){this.scroll.scrollTo(0,0,1e3,"swipeBounce")}},Object(o.c)({}))},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page recommend"},[a("div",{ref:"wrapper",staticClass:"container wrapper"},[a("div",{ref:"content",staticClass:"content"},[a("div",{staticClass:"pull_down"},[t._v(t._s(t.pullDownText))]),t._v(" "),a("div",{staticClass:"list_box"},[a("div",{staticClass:"top_tab"},[t._v("Infinite")]),t._v(" "),a("transition",{attrs:{name:t.slidename}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.mainarea,expression:"mainarea"}]},t._l(t.dataList,function(e,s){return a("div",{key:s,staticClass:"list_item flex",on:{click:function(a){t.toDetail(e._id)}}},[a("div",{staticClass:"item_title"},[t._v(t._s(e.title))]),t._v(" "),a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.post,expression:"item.post"}],staticClass:"item_post"})])}))])],1)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.scrollTopView,expression:"scrollTopView"}],staticClass:"scroll-top",on:{click:t.toTop}},[a("span",{staticClass:"iconfont icon-totop"},[t._v("")])]),t._v(" "),a("footers",{ref:"footer",attrs:{urlRouter:t.$route.path}})],1)},staticRenderFns:[]},p=a("VU/8")(r,c,!1,function(t){a("f/Hs")},"data-v-1357c747",null);e.default=p.exports},"f/Hs":function(t,e){}});